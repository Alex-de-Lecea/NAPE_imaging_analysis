

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Anaconda, Jupyter Notebook, SIMA Installation Guide &mdash; NAPE Center Calcium Imaging Analysis Documentation 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation of suite2p on Windows" href="installs2p.html" />
    <link rel="prev" title="Welcome to NAPE Center Calcium Imaging Analysis Documentation Site!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> NAPE Center Calcium Imaging Analysis Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Anaconda, Jupyter Notebook, SIMA Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#starting-anaconda-and-installing-an-environment">Starting Anaconda and installing an environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-jupyter-notebook-to-edit-and-run-sima-code">Using jupyter notebook to edit and run (SIMA) code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installs2p.html">Installation of suite2p on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="suite2p.html">Suite2p Preprocessing Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Suite2p Segmentation Parameter Explanations and Demos</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NAPE Center Calcium Imaging Analysis Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Anaconda, Jupyter Notebook, SIMA Installation Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/install_anaconda_sima.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="anaconda-jupyter-notebook-sima-installation-guide">
<h1>Anaconda, Jupyter Notebook, SIMA Installation Guide<a class="headerlink" href="#anaconda-jupyter-notebook-sima-installation-guide" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will walk you through how to install python, Anaconda Prompt/Navigator, the necessary prerequisites to run the calcium imaging preprocessing analysis. The steps involve:</p>
<ul class="simple">
<li><p>Install Anaconda: this is a graphical and command line interface that allows you to manage multiple, unique instances (called environments) of python that can be tailored to different projects. Think of Anaconda as a drawer file organizer where each folder (ie. environment) pertains to a specific project/topic.</p></li>
<li><p>Set up an Anaconda environment for the specific calcium imaging preprocessing project: An environment is a directory/instance that contains a collection of python packages that the user can customize and tailor to a specific project. This is especially important if you have multiple projects that require different versions of python or conflicting packages/libraries that must be separated.</p></li>
<li><p>Open and run jupyter notebook, application that allows for editing, running, and prototyping python code.</p></li>
</ul>
<p>Unfortunately and fortunately (it’s beneficial to learn some coding!) for you, this will involve some tinkering with the Anaconda command prompt. To facilitate this process, all commands to be executed in the command prompt are bolded and any text that needs to be changed by you is bolded and italicized.</p>
<ol class="arabic simple">
<li><p>Download the Anaconda Installer: <a class="reference external" href="https://www.anaconda.com/distribution/#windows">https://www.anaconda.com/distribution/#windows</a> and run the installer.
a. The 64-bit graphical installer is recommended for most PCs
b. Choose Python 3.7 version for most up-to-date python version. Note: You can still install a Python 2.7 environment in Anaconda.</p></li>
</ol>
<img alt="_images/1_anaconda_website.png" src="_images/1_anaconda_website.png" />
<ol class="arabic simple" start="2">
<li><p>Follow the installer prompts: Hit “Next”, “I Agree”, “Next” for Just Me (Installation Type)</p></li>
</ol>
<img alt="_images/2_anaconda_setup_1.png" src="_images/2_anaconda_setup_1.png" />
<ol class="arabic simple" start="3">
<li><p>Indicate the path to install Anaconda and hit “Next”</p></li>
</ol>
<img alt="_images/3_anaconda_setup_2.png" src="_images/3_anaconda_setup_2.png" />
<ol class="arabic simple" start="4">
<li><p>On the Advanced Installation Options window, keep the default settings and hit “Install” and continue through the installation until the end (ie. Hit “Next”s)</p></li>
</ol>
<div class="section" id="starting-anaconda-and-installing-an-environment">
<h2>Starting Anaconda and installing an environment<a class="headerlink" href="#starting-anaconda-and-installing-an-environment" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple" start="5">
<li><p>Search for “Anaconda” in the start menu and click “Anaconda Prompt</p></li>
</ol>
<img alt="_images/4_open_prompt.png" src="_images/4_open_prompt.png" />
<p>This is how the anaconda prompt looks like at the start. The current environment is in parentheses and the following text indicates what directory you currently are in (equivalent to if you had the finder/explorer window open to that specific folder).
* Note: an environment is a directory that contains a collection of python packages that the user can customize and tailor to a specific project. One can create, edit, and delete any number of environments as he or she chooses.</p>
<img alt="_images/5_prompt.png" src="_images/5_prompt.png" />
<p>6) Download the sima_env.yml file in this link: <a class="reference external" href="https://github.com/zhounapeuw/NAPE_imaging_analysis/blob/master/sima_env.yml">https://github.com/zhounapeuw/NAPE_imaging_analysis/blob/master/sima_env.yml</a>
*  To do this, you need to right click the “raw” button and click “Save target as” and save the file to an easy-to-access folder (throughout this walkthrough, it will be in the Downloads folder).</p>
<img alt="_images/6_get_env.png" src="_images/6_get_env.png" />
<p>7) Take note of where the sima_env.yml file is located (in this example it is in my downloads folder, but it can be anywhere you want as long as you provide the correct path to the file during installation).
<br> *  Take note of the full path to where the sima_env.yml is in. If it is in the downloads folder, the path will be similar to <strong>“C:/Users/user_name/Downloads”</strong> where <strong>user_name</strong> may differ across computers based on what the user name is. Please replace <em>user_name</em> with your PC’s username.
|  *  Note: the sima_env.yml file contains installation information to recreate the same environment and installed packages to run the analyses.
*  Note: the sima_env.yml file can be deleted once everything has been installed and the analysis scripts work. <br>
*  Note: the python version of this environment is 2.7, which is required for SIMA (the motion correction package) to run.</p>
<img alt="_images/7_env_path.png" src="_images/7_env_path.png" />
<p>8) Copy, paste, and execute the following code into the anaconda prompt to recreate a new environment from the sima_env.yml file: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">sima_env</span> <span class="pre">-f</span> <span class="pre">C:/Users/user_name/Downloads/sima_env.yml</span></code> (remember to replace the user_name)
* Note, you can also navigate to the Downloads folder yourself using the <strong>cd</strong> command and simply execute <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">sima_env</span> <span class="pre">-f</span> <span class="pre">sima_env.yml</span></code></p>
<img alt="_images/8_create_env.png" src="_images/8_create_env.png" />
<p>Once the environment installer runs through, you should see a list of all the conda and python packages successfully installed.</p>
<img alt="_images/9_env_installed.png" src="_images/9_env_installed.png" />
<ol class="arabic simple" start="9">
<li><p>Thus far, we have been operating under the default, base environment; we need to switch over to the new sima_env environment we just created. We do this by typing and executing: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">sima_env</span></code>.</p></li>
</ol>
<img alt="_images/10_activate_env.png" src="_images/10_activate_env.png" />
<ol class="arabic simple" start="10">
<li><p>If you encounter an error that contains: LookupError: unknown encoding: cp65001 , you will need to execute the following line: <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">PYTHONIOENCODING=UTF-8</span></code></p></li>
<li><p>Navigate to the following link <a class="reference external" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely">https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely</a> and download “Shapely-1.6.4.post2-cp27-cp27m-win_amd64.whl” .</p></li>
</ol>
<p>Then in anaconda prompt, run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">C:/Users/user_name/Downloads/Shapely-1.6.4.post2-cp27-cp27m-win_amd64.whl</span></code> (remember to replace the user_name) .</p>
<img alt="_images/11_install_shapely.png" src="_images/11_install_shapely.png" />
<ol class="arabic simple" start="12">
<li><p>To complete the environment installation, execute <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sima</span></code></p></li>
</ol>
<img alt="_images/12_install_sima.png" src="_images/12_install_sima.png" />
</div>
<div class="section" id="using-jupyter-notebook-to-edit-and-run-sima-code">
<h2>Using jupyter notebook to edit and run (SIMA) code<a class="headerlink" href="#using-jupyter-notebook-to-edit-and-run-sima-code" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple" start="13">
<li><p>Download the SIMA_motion_correction.ipynb script from this link: <a class="reference external" href="https://github.com/zhounapeuw/NAPE_imaging_analysis/blob/master/SIMA_motion_correction.ipynb">https://github.com/zhounapeuw/NAPE_imaging_analysis/blob/master/SIMA_motion_correction.ipynb</a></p></li>
</ol>
<img alt="_images/13_download_mc_code.png" src="_images/13_download_mc_code.png" />
<ol class="arabic simple" start="14">
<li><p>Take note of where the analysis jupyter notebook or python script resides (We have it in the Downloads folder for this demo)</p></li>
</ol>
<img alt="_images/14_mc_code_dir.png" src="_images/14_mc_code_dir.png" />
<p>Then navigate to that folder in the anaconda prompt : <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">C:/Users/user_name/Downloads/</span></code> (remember to replace the user_name)</p>
<img alt="_images/15_cd_to_code.png" src="_images/15_cd_to_code.png" />
<p>15) Execute <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code> and an instance of jupyter notebook will start up in your web browser.
* Jupyter notebook is a powerful application that allows for editing and running python code. Anaconda boots up an instance of python that can be interacted with via the jupyter notebook web client.
* The first page that opens in your browser will show the files in your current directory specified in the Anaconda prompt. Files with the ipynb (iPython notebook) extension can be clicked and will open the notebook.</p>
<img alt="_images/16_jupyter_open.png" src="_images/16_jupyter_open.png" />
<p>Then the following window will open in your default browser:</p>
<img alt="_images/17_jupyter_notebook.png" src="_images/17_jupyter_notebook.png" />
<p>A jupyter notebook consists of cells where one can write and execute code. Typically the first cell contains lines for importing packages and dependencies. For example, for us to use the SIMA library and its functions, we must have an import sima line.
* To run a cell, the easiest way is to press shift + enter
* Refer to this guide for more details on how to use jupyter notebook: <a class="reference external" href="https://www.codecademy.com/articles/how-to-use-jupyter-notebooks">https://www.codecademy.com/articles/how-to-use-jupyter-notebooks</a></p>
<img alt="_images/18_mc_code.png" src="_images/18_mc_code.png" />
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>A) If you encounter the following problem during environment installation:
LinkError: post-link script failed for package defaults::qt-5.6.2-vc9hc26998b_12
location of failed script: C:UsersstuberadminAnaconda3envstmp_simaScripts.qt-post-link.bat
You will need to search “edit the system environment variables” in the search bar and add this path: C:WindowsSystem32to the current user’s environmental path variables.</p>
<img alt="_images/19_env_var.png" src="_images/19_env_var.png" />
<img alt="_images/20_env_var_2.png" src="_images/20_env_var_2.png" />
<ol class="arabic simple" start="4">
<li><p>Replace <code class="code python docutils literal notranslate"><span class="punctuation"><span class="pre">{</span></span><span class="name"><span class="pre">PATH_TO_THE_FILE</span></span><span class="punctuation"><span class="pre">}</span></span></code> with path of <code class="code python docutils literal notranslate"><span class="name"><span class="pre">environment</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">yml</span></span></code> and run <code class="code python docutils literal notranslate"><span class="name"><span class="pre">conda</span></span> <span class="name"><span class="pre">env</span></span> <span class="name"><span class="pre">create</span></span> <span class="operator"><span class="pre">-</span></span><span class="name"><span class="pre">f</span></span> <span class="punctuation"><span class="pre">{</span></span><span class="name"><span class="pre">PATH_TO_THE_FILE</span></span><span class="punctuation"><span class="pre">}</span></span><span class="pre">\</span><span class="name"><span class="pre">environment</span></span><span class="operator"><span class="pre">.</span></span><span class="name"><span class="pre">yml</span></span></code>. In this case, <code class="code python docutils literal notranslate"><span class="punctuation"><span class="pre">{</span></span><span class="name"><span class="pre">PATH_TO_THE_FILE</span></span><span class="punctuation"><span class="pre">}</span></span></code> is <code class="code python docutils literal notranslate"><span class="name"><span class="pre">D</span></span><span class="punctuation"><span class="pre">:</span></span><span class="pre">\</span><span class="name"><span class="pre">NAPE_2pBenchmark</span></span></code></p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installs2p.html" class="btn btn-neutral float-right" title="Installation of suite2p on Windows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to NAPE Center Calcium Imaging Analysis Documentation Site!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Zhe Charles Zhou

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
